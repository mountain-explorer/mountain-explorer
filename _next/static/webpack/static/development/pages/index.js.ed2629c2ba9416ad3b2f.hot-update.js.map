{"version":3,"file":"static/webpack/static/development/pages/index.js.ed2629c2ba9416ad3b2f.hot-update.js","sources":["webpack:///./src/components/CoordinateCurrent/index.tsx"],"sourcesContent":["import { useState, useEffect } from \"react\";\nimport { makeStyles, Theme, createStyles } from \"@material-ui/core/styles\";\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\nimport Box from \"@material-ui/core/Box\";\nimport Typography from \"@material-ui/core/Typography\";\nimport TextField from \"@material-ui/core/TextField\";\n\nimport {\n  convertFromWGS84ToTWD97,\n  convertFromWGS84ToTWD67\n} from \"utils/coordinate\";\nimport {\n  TITLE_WGS84,\n  WGS84_LONGITUDE,\n  WGS84_LATITUDE,\n  WGS84_ACCURACY,\n  WGS84_ALTITUDE,\n  WGS84_ALTITUDE_ACCURACY,\n  WGS84_UNIT,\n  TITLE_TWD97,\n  TWD97_X,\n  TWD97_Y,\n  TITLE_TWD67\n} from \"utils/constants\";\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    loadingBox: {\n      position: \"absolute\",\n      top: \"50%\",\n      left: \"50%\",\n      transform: \"translate(-50%, -50%)\"\n    },\n    textLabel: {\n      padding: theme.spacing(1)\n    },\n    textFieldGroup: {\n      marginBottom: theme.spacing(4)\n    },\n    containerCenter: {\n      display: \"flex\",\n      alignItems: \"center\"\n    }\n  })\n);\n\nexport default () => {\n  const classes = useStyles();\n  const [isLoading, setIsLoading] = useState<Boolean>(true);\n  const [longitude, setLongitude] = useState<null | number>(null);\n  const [latitude, setLatitude] = useState<null | number>(null);\n  const [altitude, setAltitude] = useState<null | number>(null);\n  const [accuracy, setAccuracy] = useState<null | number>(null);\n  const [altitudeAccuracy, setAltitudeAccuracy] = useState<null | number>(null);\n\n  useEffect(() => {\n    const geoOptions = {\n      enableHighAccuracy: true\n    };\n\n    const watchId = navigator.geolocation.watchPosition(\n      position => {\n        const {\n          longitude,\n          latitude,\n          accuracy,\n          altitude,\n          altitudeAccuracy\n        } = position.coords;\n\n        setLongitude(longitude);\n        setLatitude(latitude);\n        setAccuracy(accuracy);\n        setAltitude(altitude);\n        setAltitudeAccuracy(altitudeAccuracy);\n        setIsLoading(false);\n      },\n      error => {\n        // TODO: handle error\n        console.log(\"Error occurred. Error code: \" + error.code);\n        // error.code can be:\n        //   0: unknown error\n        //   1: permission denied\n        //   2: position unavailable (error response from location provider)\n        //   3: timed out\n      },\n      geoOptions\n    );\n\n    return () => {\n      navigator.geolocation.clearWatch(watchId);\n    };\n  }, []);\n\n  if (!process.browser || isLoading) {\n    return (\n      <div className={classes.loadingBox}>\n        <CircularProgress />\n      </div>\n    );\n  }\n\n  if (!navigator.geolocation) {\n    return (\n      <div>\n        <p>Geolocation is not supported for your Browser/OS version yet.</p>\n      </div>\n    );\n  }\n\n  const twd97 =\n    longitude && latitude\n      ? convertFromWGS84ToTWD97([longitude, latitude])\n      : null;\n  const twd67 =\n    longitude && latitude\n      ? convertFromWGS84ToTWD67([longitude, latitude])\n      : null;\n\n  return (\n    <Box m={1}>\n      <Typography variant=\"h5\" component=\"h3\">\n        {TITLE_WGS84}\n      </Typography>\n      <div>\n        <p>\n          {WGS84_LONGITUDE}: {longitude}\n        </p>\n        <p>\n          {WGS84_LATITUDE}: {latitude}\n        </p>\n        <p>\n          {WGS84_ACCURACY}: {accuracy} {WGS84_UNIT}\n        </p>\n        <p>\n          {WGS84_ALTITUDE}: {altitude} {WGS84_UNIT}\n        </p>\n        <p>\n          {WGS84_ALTITUDE_ACCURACY}: {altitudeAccuracy} {WGS84_UNIT}\n        </p>\n      </div>\n      <div className={classes.textFieldGroup}>\n        <Typography variant=\"h5\" component=\"h3\" className={classes.textLabel}>\n          {TITLE_TWD97}\n        </Typography>\n        <div className={classes.containerCenter}>\n          <TextField\n            label={TWD97_X}\n            type=\"number\"\n            variant=\"outlined\"\n            InputProps={{\n              readOnly: true\n            }}\n            value={twd97?.[0] || \"\"}\n          />\n          <TextField\n            label={TWD97_Y}\n            type=\"number\"\n            variant=\"outlined\"\n            InputProps={{\n              readOnly: true\n            }}\n            value={twd97?.[1] || \"\"}\n          />\n        </div>\n      </div>\n      <div>\n        <h2>{TITLE_TWD67}</h2>\n        <p>{twd67?.[0]}</p>\n        <p>{twd67?.[1]}</p>\n      </div>\n    </Box>\n  );\n};\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AAEA;AAIA;AAcA;AAAA;AAEA;AACA;AACA;AACA;AACA;AAJA;AAMA;AACA;AADA;AAGA;AACA;AADA;AAGA;AACA;AACA;AAFA;AAbA;AADA;AAqBA;AACA;AACA;AAFA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AACA;AAQA;AACA;AACA;AADA;AAIA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AASA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAEA;AACA;AACA;AACA;AACA;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AACA;AACA;AAIA;AAKA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AACA;AACA;AADA;AAGA;AAPA;AAAA;AAAA;AAAA;AAAA;AAAA;AAUA;AACA;AACA;AACA;AACA;AADA;AAGA;AAPA;AAAA;AAAA;AAAA;AAAA;AAAA;AAWA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;;;;A","sourceRoot":""}